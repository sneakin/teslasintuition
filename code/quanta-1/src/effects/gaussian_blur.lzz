#hdr
#include "renderer.h"
#include "vertex_shader.h"
#include "fragment_shader.h"
#include "shader_program.h"
#include "effects/horizontal_blur.h"
#include "effects/vertical_blur.h"
#include "renderer/gl3/framebuffer_texture.h"
#end

class GaussianBlur
{
  HorizontalBlur _horizontal;
  VerticalBlur _vertical;
  GL3::FramebufferTexture &_scratch;
  
public:
  GaussianBlur(Renderer &r, int size, GL3::FramebufferTexture &scratch)
    : _horizontal(r, size), _vertical(r, size), _scratch(scratch)
  {
  }

  void render(GL3::Framebuffer &output, Texture &colors)
  {
    _scratch.bindFramebuffer();
    _horizontal.render(colors);
    output.bind();
    _vertical.render(_scratch.colors());
  }
};
